import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang-Bn109ln0.js";import{c as p,w as t,f as k,a as g,p as o,o as d,g as l,h as n,r as a}from"./app-DvGICojQ.js";import"./YunFooter.vue_vue_type_style_index_0_lang-6I6EwKPx.js";import"./YunCard.vue_vue_type_script_setup_true_lang-G2SLBOpE.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-B-GmT0Fn.js";import"./post-JeTKiWMk.js";const w="/assets/ci-eg-CX8liGwP.png",x="/assets/cs-intro-eg-DSHFUT3V.png",y="/assets/cs-allocation-site-Di2azGVl.png",E="/assets/cs-heap-CxpSrnSP.png",M="/assets/cs-new-CSENSqUV.png",v="/assets/cs-assign-B6-Ht27T.png",b="/assets/cs-store-CMoxNJ2r.png",f="/assets/cs-load-4hX8cM-m.png",_="/assets/select-eg-BdIai5tB.png",F="/assets/md-cs-BOqWkMPl.png",C="/assets/cs-pfg-eg-DGx1nDXA.png",L="/assets/res-pta-cs1-DGbwaM8R.png",S="/assets/css-os-BhsFjYaL.png",A="/assets/cs-os-cg-BqylCwoW.png",D="/assets/cs-os-ts-BMd2EH57.png",$={__name:"20240805 8 指针分析-上下文敏感",setup(B,{expose:r}){const s=JSON.parse('{"title":"8 指针分析-上下文敏感","description":"","frontmatter":{"title":"8 指针分析-上下文敏感","date":"2024-08-05T00:00:00.000Z","tags":["静态代码分析"],"categories":["静态代码分析"]},"headers":[{"level":2,"title":"8.1 引入","slug":"_8-1-引入","link":"#_8-1-引入","children":[{"level":3,"title":"8.1.1 引例","slug":"_8-1-1-引例","link":"#_8-1-1-引例","children":[]},{"level":3,"title":"8.1.2 上下文不敏感与上下文敏感","slug":"_8-1-2-上下文不敏感与上下文敏感","link":"#_8-1-2-上下文不敏感与上下文敏感","children":[]},{"level":3,"title":"8.1.3 上下文敏感的堆","slug":"_8-1-3-上下文敏感的堆","link":"#_8-1-3-上下文敏感的堆","children":[]}]},{"level":2,"title":"8.2 上下文敏感的指针分析规则","slug":"_8-2-上下文敏感的指针分析规则","link":"#_8-2-上下文敏感的指针分析规则","children":[{"level":3,"title":"8.2.1 定义和记号","slug":"_8-2-1-定义和记号","link":"#_8-2-1-定义和记号","children":[]},{"level":3,"title":"8.2.2 规则","slug":"_8-2-2-规则","link":"#_8-2-2-规则","children":[]}]},{"level":2,"title":"8.3 上下文敏感的指针分析算法","slug":"_8-3-上下文敏感的指针分析算法","link":"#_8-3-上下文敏感的指针分析算法","children":[{"level":3,"title":"8.3.1 实现思路","slug":"_8-3-1-实现思路","link":"#_8-3-1-实现思路","children":[]},{"level":3,"title":"8.3.2 算法","slug":"_8-3-2-算法","link":"#_8-3-2-算法","children":[]}]},{"level":2,"title":"8.4 上下文敏感性的各种变体","slug":"_8-4-上下文敏感性的各种变体","link":"#_8-4-上下文敏感性的各种变体","children":[{"level":3,"title":"8.4.1 关于上下文敏感性","slug":"_8-4-1-关于上下文敏感性","link":"#_8-4-1-关于上下文敏感性","children":[]},{"level":3,"title":"8.4.2 调用点敏感","slug":"_8-4-2-调用点敏感","link":"#_8-4-2-调用点敏感","children":[]},{"level":3,"title":"8.4.3 对象敏感","slug":"_8-4-3-对象敏感","link":"#_8-4-3-对象敏感","children":[]},{"level":3,"title":"8.4.4 类型敏感","slug":"_8-4-4-类型敏感","link":"#_8-4-4-类型敏感","children":[]},{"level":3,"title":"8.4.5 对比","slug":"_8-4-5-对比","link":"#_8-4-5-对比","children":[]}]},{"level":2,"title":"8.5 自检问题","slug":"_8-5-自检问题","link":"#_8-5-自检问题","children":[]}],"relativePath":"pages/posts/静态代码分析/20240805 8 指针分析-上下文敏感/20240805 8 指针分析-上下文敏感.md","path":"/home/runner/work/LiuZhuJunYa.github.io/LiuZhuJunYa.github.io/pages/posts/静态代码分析/20240805 8 指针分析-上下文敏感/20240805 8 指针分析-上下文敏感.md","lastUpdated":1731428437000}'),e=g(),m=s.frontmatter||{};return e.meta.frontmatter=Object.assign(e.meta.frontmatter||{},s.frontmatter||{}),o("pageData",s),o("valaxy:frontmatter",m),globalThis.$frontmatter=m,r({frontmatter:{title:"8 指针分析-上下文敏感",date:"2024-08-05T00:00:00.000Z",tags:["静态代码分析"],categories:["静态代码分析"]}}),(i,u)=>{const h=c;return d(),p(h,{frontmatter:k(m)},{"main-content-md":t(()=>u[0]||(u[0]=[l("p",null,[n("原文链接："),l("a",{href:"https://static-analysis.cuijiacai.com/08-pta-cs/",target:"_blank",rel:"noreferrer"},"https://static-analysis.cuijiacai.com/08-pta-cs/")],-1),l("h1",{id:"_8-指针分析-上下文敏感",tabindex:"-1"},[n("8 指针分析-上下文敏感 "),l("a",{class:"header-anchor",href:"#_8-指针分析-上下文敏感","aria-label":'Permalink to "8 指针分析-上下文敏感"'},"​")],-1),l("h2",{id:"_8-1-引入",tabindex:"-1"},[n("8.1 引入 "),l("a",{class:"header-anchor",href:"#_8-1-引入","aria-label":'Permalink to "8.1 引入"'},"​")],-1),l("h3",{id:"_8-1-1-引例",tabindex:"-1"},[n("8.1.1 引例 "),l("a",{class:"header-anchor",href:"#_8-1-1-引例","aria-label":'Permalink to "8.1.1 引例"'},"​")],-1),l("p",null,"首先，我们通过一个例子来看一下上下文不敏感的指针分析存在的问题。考虑如下的类结构：",-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"interface"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Number"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    int"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," One"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Number"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," int"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 1"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Two"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," implements"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Number"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    public"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," int"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,"假设我们要对下面这段程序进行常量传播的分析：",-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," main"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Number n1, n2, x, y;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    n1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," One"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(); "),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// o1")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    n2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Two"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(); "),l("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"// o2")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    x "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," id"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n1);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    y "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," id"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n2);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    int"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," i "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Number "),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"id"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Number n) {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," n;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,[n("变量 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"i")]),l("annotation",{encoding:"application/x-tex"},"i")])])]),n(" 在常量传播分析中的结果是？")],-1),l("p",null,"如果我们进行上下文不敏感的指针分析，最终我们得到的PFG如下：",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:w,alt:"ci-eg",style:{zoom:"30%"}})],-1),l("p",null,[n("从而，分析 "),l("code",null,"x.get()"),n(" 时会对两个可能的接收对象分别调用 "),l("code",null,"get"),n(" 方法，从而得到结果为1或2，即 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"i")]),l("annotation",{encoding:"application/x-tex"},"i")])])]),n(" 的常量传播分析结果为 NAC，这是不准确的。")],-1),l("p",null,[n("不准确的原因是，由于我们不区分上下文，导致对于 "),l("code",null,"id"),n(" 方法的所有调用会汇合到一处，从而丢失了精度，造成了后续指针的指向集合当中存在假的积极值（False Positive）。")],-1),l("p",null,"但如果我们进行上下文敏感的分析，则最终得到的PFG如下：",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:x,alt:"cs-intro-eg",style:{zoom:"25%"}})],-1),l("p",null,[n("于是，分析 "),l("code",null,"x.get()"),n(" 只会对接收对象 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mn",null,"1")])]),l("annotation",{encoding:"application/x-tex"},"o_1")])])]),n(" 调用目标方法，从而 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"i")]),l("annotation",{encoding:"application/x-tex"},"i")])])]),n(" 的常量传播分析结果为 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"i"),l("mo",null,"="),l("mn",null,"1")]),l("annotation",{encoding:"application/x-tex"},"i = 1")])])]),n(" ，这是准确的。")],-1),l("h3",{id:"_8-1-2-上下文不敏感与上下文敏感",tabindex:"-1"},[n("8.1.2 上下文不敏感与上下文敏感 "),l("a",{class:"header-anchor",href:"#_8-1-2-上下文不敏感与上下文敏感","aria-label":'Permalink to "8.1.2 上下文不敏感与上下文敏感"'},"​")],-1),l("p",null,"关于上下文敏感与不敏感的基本概念参见定义6.6以及6.3.2节的相关内容。",-1),l("p",null,"上下文不敏感的分析的精度丢失主要是由于下面一些原因：",-1),l("ul",null,[l("li",null,[l("p",null,"在动态执行的过程中，每一个方法可能在不同的调用语境中被调用多次。")]),l("li",null,[l("p",null,"在不同的调用语境下面，方法中的变量可能会指向不同的对象。")]),l("li",null,[l("p",null,"在上下文不敏感的指针分析中，不同的上下文被混合在了一起，并传递给程序的其他部分（通过返回值或者副作用），这就导致了虚假的数据流。"),l("ul",null,[l("li",null,[n("比如说上面的引例，其上下文不敏感的分析结果中， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"pt(x)")])])]),n(" 中的 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mn",null,"2")])]),l("annotation",{encoding:"application/x-tex"},"o_2")])])]),n(" 和 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"pt(y)")])])]),n(" 中的 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mn",null,"1")])]),l("annotation",{encoding:"application/x-tex"},"o_1")])])]),n(" 都是虚假的指向对象，从而给常量传播分析造成了虚假的数据流。")])])])],-1),l("div",{class:"conclusion"},[l("p",{class:"title"},"结论8.1"),l("p",null,"上下文敏感通过区分不同语境下的不同数据流来模拟调用上下文，从而提高精度。")],-1),l("p",null,"最古老的，也是最为人熟知的上下文敏感策略是调用点敏感（也称为调用串），用一连串的调用点来表示上下文，即：本方法的调用点、调用者的调用点、调用者的调用者的调用点… 调用点敏感其实就是对动态执行过程中调用栈的抽象，这里我们有个直觉上的印象就好，因为我们后面会以它为例去讲解规则和算法。具体的各种上下文敏感策略的形式化的定义会在8.4节中详细讲解。",-1),l("p",null,[n("比如说之前的引例，方法 "),l("code",null,"id(Number)"),n(" 有两个上下文，"),l("code",null,"[5]"),n(" 和 "),l("code",null,"[6]"),n("。")],-1),l("h4",{id:"基于克隆的上下文敏感",tabindex:"-1"},[n("基于克隆的上下文敏感 "),l("a",{class:"header-anchor",href:"#基于克隆的上下文敏感","aria-label":'Permalink to "基于克隆的上下文敏感"'},"​")],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.1"),l("p",null,[n("定义 "),l("strong",null,"基于克隆的上下文敏感的指针分析（Cloning-based Context-sensitive Pointer Analysis）"),n(" 为满足以下3个条件的指针分析：")]),l("ul",null,[l("li",null,[l("p",null,"每个方法都被一个或者多个上下文修饰；")]),l("li",null,[l("p",null,"变量也被上下文修饰（继承自声明该变量的方法）；")]),l("li",null,[l("p",null,"对于每个上下文，都会恰有一个方法及该方法中的变量的克隆。")])])],-1),l("p",null,[n("基于克隆的上下文敏感分析是实现上下文敏感最直接的方法，就像我们在引例中所做的那样，我们将两个不同上下文中的 "),l("code",null,"id"),n(" 方法用两个结点表示，在前面分别用其上下文修饰。")],-1),l("h3",{id:"_8-1-3-上下文敏感的堆",tabindex:"-1"},[n("8.1.3 上下文敏感的堆 "),l("a",{class:"header-anchor",href:"#_8-1-3-上下文敏感的堆","aria-label":'Permalink to "8.1.3 上下文敏感的堆"'},"​")],-1),l("p",null,"在6.3.1节中，我们讨论了指针分析四大要素中的的堆抽象，当时我们提出的抽象策略是分配点抽象，将同一分配点处产的所有对象抽象成一个对象。",-1),l("p",null,"而现在，分配点处的变量已经上下文敏感了，那么分配点处分配的堆内存也应该是上下文敏感的，这样可以细化堆内存抽象的粒度，从而提高指针分析的精度。",-1),l("p",null,"并且，面向对象语言（比如说Java）本身就是典型的堆密集型（heap-intensive）语言，会频繁地操作堆内存。",-1),l("p",null,"在实践中，为了提升精度，上下文敏感也应当被应用到堆抽象中。",-1),l("ul",null,[l("li",null,[l("p",null,"抽象的对象也应当用上下文来修饰（称为堆上下文），最普遍的选择是继承该对象分配点所在方法的上下文。")]),l("li",null,[l("p",null,"上下文敏感的堆抽象在分配点抽象的基础上提供了一个粒度更精确的堆模型。")])],-1),l("p",{style:{"text-align":"center"}},[l("img",{src:y,alt:"cs-allocation-site",style:{zoom:"30%"}})],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.2"),l("p",null,[n("称区分 "),l("strong",null,"堆上下文（Heap Context）"),n(" 的分配点抽象为 "),l("strong",null,"上下文敏感的分配点抽象（Context-sensitive Allocation-site Abstraction）"),n(" 。")])],-1),l("p",null,"那么，为什么上下文敏感的堆抽象能够提升精度呢？",-1),l("ul",null,[l("li",null,[l("p",null,"在动态执行的过程中，一个分配点可以在不同的调用语境下创建多个对象；")]),l("li",null,[l("p",null,"不同的对象（有相同的分配点分配）可能会携带不同的数据流被操作，比如说在它们的字段中存储不同的值。")]),l("li",null,[l("p",null,"在指针分析中，不带堆上下文分析这样的代码可能会由于合并不同上下文中的数据流到一个抽象对象中而丢失精度。")]),l("li",null,[l("p",null,"相比之下，通过堆上下文来区分同一个分配点的不同对象能够获得不少的精度。")])],-1),l("p",null,"比如对于下面这个例子：",-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," One"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Two"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"x1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," newX"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n1);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"x2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," newX"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n2);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"n "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x1.f;")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"X "),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"newX"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Number p) {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    X x "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," X"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    x.f "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," p;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    return"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," x;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," X"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Number f;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,"我们对上面的程序作3次指针分析进行对比，分别是：上下文敏感，不考虑堆上下文；上下文敏感，考虑堆上下文；上下文不敏感，考虑堆上下文。",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:E,alt:"cs-heap",style:{zoom:"30%"}})],-1),l("p",null,[n("从第一次分析中，我们会发现，在将 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mn",null,"3"),l("mo",null,":"),l("mi",null,"p")]),l("annotation",{encoding:"application/x-tex"},"3:p")])])]),n(" 和 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mn",null,"4"),l("mo",null,":"),l("mi",null,"p")]),l("annotation",{encoding:"application/x-tex"},"4:p")])])]),n(" 合并给 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mn",null,"8")])]),l("annotation",{encoding:"application/x-tex"},"o_8")])])]),n(" 的时候造成了虚假的数据流，从而导致了对 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"n")]),l("annotation",{encoding:"application/x-tex"},"n")])])]),n(" 分析的不精确。")],-1),l("p",null,[n("在第二次分析中，我们可以看到，考虑了堆上下文之后，第一次分析的问题就被解决了，我们分别考虑了在程序第8行分配点处分配的两个对象，用分配点的上下文修饰（这里上下文暂定为调用点的位置），即 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mn",null,"3"),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mn",null,"8")])]),l("annotation",{encoding:"application/x-tex"},"3:o_8")])])]),n(" 和 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mn",null,"4"),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mn",null,"8")])]),l("annotation",{encoding:"application/x-tex"},"4:o_8")])])]),n(" ，从而避免了数据流合并带来的精度丢失。")],-1),l("p",null,"而第三次分析告诉我们，在不考虑调用上下文的情况下单考虑堆上下文是无法提高精度的，因为堆上下文是由于调用上下文而产生的。",-1),l("h2",{id:"_8-2-上下文敏感的指针分析规则",tabindex:"-1"},[n("8.2 上下文敏感的指针分析规则 "),l("a",{class:"header-anchor",href:"#_8-2-上下文敏感的指针分析规则","aria-label":'Permalink to "8.2 上下文敏感的指针分析规则"'},"​")],-1),l("p",null,"和7.1一样，我们将用一系列推导式来形式化地定义上下文敏感的指针分析规则。",-1),l("h3",{id:"_8-2-1-定义和记号",tabindex:"-1"},[n("8.2.1 定义和记号 "),l("a",{class:"header-anchor",href:"#_8-2-1-定义和记号","aria-label":'Permalink to "8.2.1 定义和记号"'},"​")],-1),l("p",null,"为了表示方便，我们依然是要引入一些记号的，表示方法和7.1.1类似，这里我就直接列出，不加赘述了。",-1),l("table",null,[l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"center"}},"内容"),l("th",{style:{"text-align":"center"}},"记号")])]),l("tbody",null,[l("tr",null,[l("td",{style:{"text-align":"center"}},"上下文（Context）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,"∈"),l("mi",null,"C")]),l("annotation",{encoding:"application/x-tex"},"c, c', c'' \\in C")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"上下文敏感方法（C.S. Methods）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("mi",null,"m"),l("mo",null,"∈"),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"M")]),l("annotation",{encoding:"application/x-tex"},"c:m\\in C\\times M")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"上下文敏感变量（C.S. Variables）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("mi",null,"y"),l("mo",null,"∈"),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"V")]),l("annotation",{encoding:"application/x-tex"},"c:x, c':y \\in C\\times V")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"上下文敏感对象（C.S. Objects）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"O")]),l("annotation",{encoding:"application/x-tex"},"c:o_i, c':o_j\\in C\\times O")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"字段（Fields）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"f"),l("mo",{separator:"true"},","),l("mi",null,"g"),l("mo",null,"∈"),l("mi",null,"F")]),l("annotation",{encoding:"application/x-tex"},"f, g\\in F")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"实例字段（Instance Fields）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"g"),l("mo",null,"∈"),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"O"),l("mo",null,"×"),l("mi",null,"F")]),l("annotation",{encoding:"application/x-tex"},"c:o_i.f, c':o_j.g \\in C\\times O\\times F")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"上下文敏感指针（C.S. Pointers）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"C"),l("mi",null,"S"),l("mi",null,"P"),l("mi",null,"o"),l("mi",null,"i"),l("mi",null,"n"),l("mi",null,"t"),l("mi",null,"e"),l("mi",null,"r"),l("mo",null,"⊆"),l("mo",{stretchy:"false"},"("),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"V"),l("mo",{stretchy:"false"},")"),l("mo",null,"∪"),l("mo",{stretchy:"false"},"("),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"O"),l("mo",null,"×"),l("mi",null,"F"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"CSPointer \\subseteq (C\\times V)\\cup(C\\times O\\times F)")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"指向关系（Points-to Relations）"),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"p"),l("mi",null,"t"),l("mo",null,":"),l("mi",null,"C"),l("mi",null,"S"),l("mi",null,"P"),l("mi",null,"o"),l("mi",null,"i"),l("mi",null,"n"),l("mi",null,"t"),l("mi",null,"e"),l("mi",null,"r"),l("mo",null,"→"),l("mi",null,"P"),l("mo",{stretchy:"false"},"("),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"O"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"pt: CSPointer \\to P(C\\times O)")])])])])])])],-1),l("p",null,[n("其中，"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"M")]),l("annotation",{encoding:"application/x-tex"},"M")])])]),n(" 是程序中所有方法的集合， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"V")]),l("annotation",{encoding:"application/x-tex"},"V")])])]),n(" 是程序中所有变量的集合， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"O")]),l("annotation",{encoding:"application/x-tex"},"O")])])]),n(" 是程序中会产生的所有对象的集合。 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"P"),l("mo",{stretchy:"false"},"("),l("mi",null,"S"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"P(S)")])])]),n(" 表示集合 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"S")]),l("annotation",{encoding:"application/x-tex"},"S")])])]),n(" 的幂集， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"f"),l("mo",null,":"),l("msub",null,[l("mi",null,"S"),l("mn",null,"1")]),l("mo",null,"→"),l("msub",null,[l("mi",null,"S"),l("mn",null,"2")])]),l("annotation",{encoding:"application/x-tex"},"f: S_1 \\to S_2")])])]),n(" 表示从集合 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"S"),l("mn",null,"1")])]),l("annotation",{encoding:"application/x-tex"},"S_1")])])]),n(" 到集合 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"S"),l("mn",null,"2")])]),l("annotation",{encoding:"application/x-tex"},"S_2")])])]),n(" 的映射，满足 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"f"),l("mo",null,"⊆"),l("msub",null,[l("mi",null,"S"),l("mn",null,"1")]),l("mo",null,"×"),l("msub",null,[l("mi",null,"S"),l("mn",null,"2")])]),l("annotation",{encoding:"application/x-tex"},"f \\subseteq S_1 \\times S_2")])])]),n(" 。")],-1),l("h3",{id:"_8-2-2-规则",tabindex:"-1"},[n("8.2.2 规则 "),l("a",{class:"header-anchor",href:"#_8-2-2-规则","aria-label":'Permalink to "8.2.2 规则"'},"​")],-1),l("p",null,"先看前4种基本的指针影响型语句（见定义6.9）：",-1),l("table",null,[l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"center"}},"类型"),l("th",{style:{"text-align":"center"}},"语句"),l("th",{style:{"text-align":"center"}},[n("规则（在上下文 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c")]),l("annotation",{encoding:"application/x-tex"},"c")])])]),n(" 下）")]),l("th",{style:{"text-align":"center"}},"图示")])]),l("tbody",null,[l("tr",null,[l("td",{style:{"text-align":"center"}},"创建"),l("td",{style:{"text-align":"center"}},[l("code",null,"i: x = new T()")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mover",{accent:"true"},[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\overline{c:o_i \\in pt(c:x)}")])])])]),l("td",{style:{"text-align":"center"}},[l("img",{src:M,alt:"cs-new",style:{zoom:"30%"}})])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"赋值"),l("td",{style:{"text-align":"center"}},[l("code",null,"x = y")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c':o_i\\in pt(c:y)}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c':o_i \\in pt(c:x)")])])])]),l("td",{style:{"text-align":"center"}},[l("img",{src:v,alt:"cs-assign",style:{zoom:"30%"}})])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"存储"),l("td",{style:{"text-align":"center"}},[l("code",null,"x.f = y")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c':o_i\\in pt(c:x), c'':o_j\\in pt(c:y)}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c'':o_j\\in pt(c':o_i.f)")])])])]),l("td",{style:{"text-align":"center"}},[l("img",{src:b,alt:"cs-store",style:{zoom:"30%"}})])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"载入"),l("td",{style:{"text-align":"center"}},[l("code",null,"y = x.f")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c':o_i\\in pt(c:x), c'':o_j\\in pt(c':o_i.f)}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c'':o_j\\in pt(c:y)")])])])]),l("td",{style:{"text-align":"center"}},[l("img",{src:f,alt:"cs-load",style:{zoom:"30%"}})])])])],-1),l("p",null,"其中，和上一讲一样，红色虚线依然表示作为前提条件的指向关系，黑色实线依然表示作为结论的指向关系。",-1),l("p",null,"前面四个语句其实和上下文不敏感的规则除了在指针和对象面前增加了上下文的修饰以外别无二致。",-1),l("p",null,[n("不过调用语句就有些别的区别了，因为调用语句除了在原本上下文不敏感的规则之上增加了上下文之外，还有负责被调用者上下文的生成，我们用 "),l("code",null,"Select"),n(" 函数来表示调用者根据调用点处的信息生成被调用者上下文的过程。")],-1),l("table",null,[l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"center"}},"类型"),l("th",{style:{"text-align":"center"}},"语句"),l("th",{style:{"text-align":"center"}},[n("规则（在上下文 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c")]),l("annotation",{encoding:"application/x-tex"},"c")])])]),n(" 下）")])])]),l("tbody",null,[l("tr",null,[l("td",{style:{"text-align":"center"}},"调用"),l("td",{style:{"text-align":"center"}},[l("code",null,"l: r = x.k(a1, ..., an)")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c':o_i\\in pt(c:x)")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"m"),l("mo",null,"="),l("mi",null,"D"),l("mi",null,"i"),l("mi",null,"s"),l("mi",null,"p"),l("mi",null,"a"),l("mi",null,"t"),l("mi",null,"c"),l("mi",null,"h"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{separator:"true"},","),l("mi",null,"k"),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,"="),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"m = Dispatch(o_i, k), c^t = Select(c, l, c':o_i)")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"u")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"a"),l("mi",null,"j")]),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("mn",null,"1"),l("mo",null,"≤"),l("mi",null,"j"),l("mo",null,"≤"),l("mi",null,"n")]),l("annotation",{encoding:"application/x-tex"},"c'':o_u\\in pt(c:a_j), 1\\le j\\le n")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"v")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"r"),l("mi",null,"e"),l("mi",null,"t")])]),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c''':o_v\\in pt(c^t:m_{ret})}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"t"),l("mi",null,"h"),l("mi",null,"i"),l("mi",null,"s")])]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c':o_i\\in pt(c^t:m_{this})")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"u")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("msub",null,[l("mi",null,"p"),l("mi",null,"j")])]),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("mn",null,"1"),l("mo",null,"≤"),l("mi",null,"j"),l("mo",null,"≤"),l("mi",null,"n")]),l("annotation",{encoding:"application/x-tex"},"c'':o_u\\in pt(c^t:m_{p_j}), 1\\le j\\le n")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"v")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"r"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c''':o_v\\in pt(c:r)")])])])])])])],-1),l("p",null,[n("其中， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c")]),l("annotation",{encoding:"application/x-tex"},"c")])])]),n(" 是调用者的上下文， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")])]),l("annotation",{encoding:"application/x-tex"},"c^t")])])]),n(" 是被调用者，即目标方法的上下文， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"t"),l("mi",null,"h"),l("mi",null,"i"),l("mi",null,"s")])])]),l("annotation",{encoding:"application/x-tex"},"c^t:m_{this}")])])]),n(" 是方法 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("mi",null,"m")]),l("annotation",{encoding:"application/x-tex"},"c^t:m")])])]),n(" 的 "),l("code",null,"this"),n(" 变量， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("msub",null,[l("mi",null,"p"),l("mi",null,"j")])])]),l("annotation",{encoding:"application/x-tex"},"c^t:m_{p_j}")])])]),n(" 是方法 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("mi",null,"m")]),l("annotation",{encoding:"application/x-tex"},"c^t:m")])])]),n(" 的第 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"j")]),l("annotation",{encoding:"application/x-tex"},"j")])])]),n(" 个形参， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"r"),l("mi",null,"e"),l("mi",null,"t")])])]),l("annotation",{encoding:"application/x-tex"},"c^t:m_{ret}")])])]),n(" 是存放 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("mi",null,"m")]),l("annotation",{encoding:"application/x-tex"},"c^t:m")])])]),n(" 返回值的变量。")],-1),l("ul",null,[l("li",null,[l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"D"),l("mi",null,"i"),l("mi",null,"s"),l("mi",null,"p"),l("mi",null,"a"),l("mi",null,"t"),l("mi",null,"c"),l("mi",null,"h"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{separator:"true"},","),l("mi",null,"k"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"Dispatch(o_i, k)")])])]),n(" 和上一讲一致，根据 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mi",null,"i")])]),l("annotation",{encoding:"application/x-tex"},"o_i")])])]),n(" 的类型对虚调用 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k")]),l("annotation",{encoding:"application/x-tex"},"k")])])]),n(" 做方法派发，从而获得一个目标方法。")])]),l("li",null,[l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"Select(c, l, c':o_i)")])])]),n(" 根据在调用点 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"l")]),l("annotation",{encoding:"application/x-tex"},"l")])])]),n(" 处可获得的信息为目标方法 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"m")]),l("annotation",{encoding:"application/x-tex"},"m")])])]),n(" 选择一个上下文，即目标上下文的生成函数。")]),l("ul",null,[l("li",null,[l("p",null,[l("code",null,"Select"),n(" 的输入是调用点 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"l")]),l("annotation",{encoding:"application/x-tex"},"l")])])]),n(" 、调用点处的上下文 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c")]),l("annotation",{encoding:"application/x-tex"},"c")])])]),n(" 、接收对象 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")])]),l("annotation",{encoding:"application/x-tex"},"c':o_i")])])]),n("；")])]),l("li",null,[l("p",null,[l("code",null,"Select"),n(" 的输出是目标方法的的上下文 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")])]),l("annotation",{encoding:"application/x-tex"},"c^{t}")])])]),n(" 。")])])])])],-1),l("p",{style:{"text-align":"center"}},[l("img",{src:_,alt:"select-eg",style:{zoom:"50%"}})],-1),l("blockquote",null,[l("p",null,[n("关于 "),l("code",null,"Select"),n(" ，我们暂时将其视为一个抽象，详细的内容，我们会在第8.4部分具体讨论。其实就这么一个简单的 "),l("code",null,"Select"),n(" 抽象就将上下文敏感分析的算法和上下文的生成这两件事情给解耦了，这是计算机学科中非常常用的思想，读者可细细体会。")])],-1),l("h2",{id:"_8-3-上下文敏感的指针分析算法",tabindex:"-1"},[n("8.3 上下文敏感的指针分析算法 "),l("a",{class:"header-anchor",href:"#_8-3-上下文敏感的指针分析算法","aria-label":'Permalink to "8.3 上下文敏感的指针分析算法"'},"​")],-1),l("h3",{id:"_8-3-1-实现思路",tabindex:"-1"},[n("8.3.1 实现思路 "),l("a",{class:"header-anchor",href:"#_8-3-1-实现思路","aria-label":'Permalink to "8.3.1 实现思路"'},"​")],-1),l("p",null,"再上一讲中，我们是通过构建指针流图、在指针流图上传递指向信息这两个步骤相互依赖的方式来进行上下文不敏感的指针分析的。上下文敏感的指针分析我们也是采用类似的思路，只不过对于PFG上的结点以及指向集中的对象，我们会用上下文修饰来加以区分，不同修饰下的变量或者对象都有单独的一份克隆。",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:F,alt:"md-cs",style:{zoom:"40%"}})],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.3"),l("p",null,[l("strong",null,"上下文敏感的指针流图（Pointer Flow Graph with C.S.）"),n(" 是一个有向图，表达了不同堆上下文下的对象是怎样在不同调用上下文下的变量之间流动的。")]),l("ul",null,[l("li",null,[n("PFG中的结点 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"n")]),l("annotation",{encoding:"application/x-tex"},"n")])])]),n(" 代表了一个上下文敏感的变量或者一个上下文敏感的对象的某个字段，即程序中的被上下文修饰的指针。")])]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"n"),l("mo",null,"∈"),l("mi",null,"C"),l("mi",null,"S"),l("mi",null,"P"),l("mi",null,"o"),l("mi",null,"i"),l("mi",null,"n"),l("mi",null,"t"),l("mi",null,"e"),l("mi",null,"r"),l("mo",null,"⊆"),l("mo",{stretchy:"false"},"("),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"V"),l("mo",{stretchy:"false"},")"),l("mo",null,"∪"),l("mo",{stretchy:"false"},"("),l("mi",null,"C"),l("mo",null,"×"),l("mi",null,"O"),l("mo",null,"×"),l("mi",null,"F"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"n \\in CSPointer \\subseteq (C\\times V)\\cup(C\\times O\\times F) ")])])])]),l("ul",null,[l("li",null,[n("PFG中的边 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"x"),l("mo",null,"→"),l("mi",null,"y"),l("mo",null,"∈"),l("mi",null,"C"),l("mi",null,"S"),l("mi",null,"P"),l("mi",null,"o"),l("mi",null,"i"),l("mi",null,"n"),l("mi",null,"t"),l("mi",null,"e"),l("mi",null,"r"),l("mo",null,"×"),l("mi",null,"C"),l("mi",null,"S"),l("mi",null,"P"),l("mi",null,"o"),l("mi",null,"i"),l("mi",null,"n"),l("mi",null,"t"),l("mi",null,"e"),l("mi",null,"r")]),l("annotation",{encoding:"application/x-tex"},"x\\to y \\in CSPointer \\times CSPointer")])])]),n(" 表示指针 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"x")]),l("annotation",{encoding:"application/x-tex"},"x")])])]),n(" 指向的对象可能会流向指针 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"y")]),l("annotation",{encoding:"application/x-tex"},"y")])])]),n(" 的指向集合。")])]),l("p",null,[n("其中， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"C")]),l("annotation",{encoding:"application/x-tex"},"C")])])]),n(" 表示所有上下文的集合， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"V")]),l("annotation",{encoding:"application/x-tex"},"V")])])]),n(" 表示所有变量的集合， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"O")]),l("annotation",{encoding:"application/x-tex"},"O")])])]),n(" 表示所有对象的集合， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"F")]),l("annotation",{encoding:"application/x-tex"},"F")])])]),n(" 表示所有字段的集合。")])],-1),l("p",null,[n("比如说下面这个例子中，PFG-C.S.中包含了两个方法 "),l("code",null,"id"),n(" 中变量 "),l("code",null,"n"),n(" 的结点，每个上下文各有一个节点。")],-1),l("p",{style:{"text-align":"center"}},[l("img",{src:C,alt:"cs-pfg-eg",style:{zoom:"50%"}})],-1),l("blockquote",null,[l("p",null,"为了表达简洁，本讲后续的PFG都默认是上下文敏感的PFG。")],-1),l("table",null,[l("thead",null,[l("tr",null,[l("th",{style:{"text-align":"center"}},"类型"),l("th",{style:{"text-align":"center"}},"语句"),l("th",{style:{"text-align":"center"}},[n("规则（在上下文 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c")]),l("annotation",{encoding:"application/x-tex"},"c")])])]),n(" 下）")]),l("th",{style:{"text-align":"center"}},"PFG边")])]),l("tbody",null,[l("tr",null,[l("td",{style:{"text-align":"center"}},"创建"),l("td",{style:{"text-align":"center"}},[l("code",null,"i: x = new T()")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mover",{accent:"true"},[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\overline{c:o_i \\in pt(c:x)}")])])])]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"N"),l("mi",{mathvariant:"normal"},"/"),l("mi",null,"A")]),l("annotation",{encoding:"application/x-tex"},"N/A")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"赋值"),l("td",{style:{"text-align":"center"}},[l("code",null,"x = y")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c':o_i\\in pt(c:y)}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c':o_i \\in pt(c:x)")])])])]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",null,"→"),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x")]),l("annotation",{encoding:"application/x-tex"},"c:y \\to c:x")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"存储"),l("td",{style:{"text-align":"center"}},[l("code",null,"x.f = y")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c':o_i\\in pt(c:x), c'':o_j\\in pt(c:y)}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c'':o_j\\in pt(c':o_i.f)")])])])]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",null,"→"),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f")]),l("annotation",{encoding:"application/x-tex"},"c:y \\to c':o_i.f")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"载入"),l("td",{style:{"text-align":"center"}},[l("code",null,"y = x.f")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f"),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c':o_i\\in pt(c:x), c'':o_j\\in pt(c':o_i.f)}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c'':o_j\\in pt(c:y)")])])])]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mi",{mathvariant:"normal"},"."),l("mi",null,"f"),l("mo",null,"→"),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"y")]),l("annotation",{encoding:"application/x-tex"},"c':o_i.f\\to c:y")])])])])]),l("tr",null,[l("td",{style:{"text-align":"center"}},"调用"),l("td",{style:{"text-align":"center"}},[l("code",null,"l: r ="),l("code",null,"x.k(a1, ..., an)")]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"x"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c':o_i\\in pt(c:x)")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"m"),l("mo",null,"="),l("mi",null,"D"),l("mi",null,"i"),l("mi",null,"s"),l("mi",null,"p"),l("mi",null,"a"),l("mi",null,"t"),l("mi",null,"c"),l("mi",null,"h"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{separator:"true"},","),l("mi",null,"k"),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,"="),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"m = Dispatch(o_i, k), c^t = Select(c, l, c':o_i)")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"u")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"a"),l("mi",null,"j")]),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("mn",null,"1"),l("mo",null,"≤"),l("mi",null,"j"),l("mo",null,"≤"),l("mi",null,"n")]),l("annotation",{encoding:"application/x-tex"},"c'':o_u\\in pt(c:a_j), 1\\le j\\le n")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("munder",{accentunder:"true"},[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"v")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"r"),l("mi",null,"e"),l("mi",null,"t")])]),l("mo",{stretchy:"false"},")")]),l("mo",{stretchy:"true"},"‾")])]),l("annotation",{encoding:"application/x-tex"},"\\underline{c''':o_v\\in pt(c^t:m_{ret})}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"t"),l("mi",null,"h"),l("mi",null,"i"),l("mi",null,"s")])]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c':o_i\\in pt(c^t:m_{this})")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"u")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("msub",null,[l("mi",null,"p"),l("mi",null,"j")])]),l("mo",{stretchy:"false"},")"),l("mo",{separator:"true"},","),l("mn",null,"1"),l("mo",null,"≤"),l("mi",null,"j"),l("mo",null,"≤"),l("mi",null,"n")]),l("annotation",{encoding:"application/x-tex"},"c'':o_u\\in pt(c^t:m_{p_j}), 1\\le j\\le n")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"v")]),l("mo",null,"∈"),l("mi",null,"p"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"r"),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"c''':o_v\\in pt(c:r)")])])])]),l("td",{style:{"text-align":"center"}},[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"a"),l("mn",null,"1")]),l("mo",null,"→"),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("msub",null,[l("mi",null,"p"),l("mn",null,"1")])])]),l("annotation",{encoding:"application/x-tex"},"c:a_1\\to c^t:m_{p_1}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},".")]),l("annotation",{encoding:"application/x-tex"},"... ...")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,":"),l("msub",null,[l("mi",null,"a"),l("mi",null,"n")]),l("mo",null,"→"),l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("msub",null,[l("mi",null,"p"),l("mi",null,"n")])])]),l("annotation",{encoding:"application/x-tex"},"c:a_n \\to c^t:m_{p_n}")])])]),l("br"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mi",null,"t")]),l("mo",null,":"),l("msub",null,[l("mi",null,"m"),l("mrow",null,[l("mi",null,"r"),l("mi",null,"e"),l("mi",null,"t")])]),l("mo",null,"→"),l("mi",null,"c"),l("mo",null,":"),l("mi",null,"r")]),l("annotation",{encoding:"application/x-tex"},"c^t:m_{ret}\\to c:r")])])])])])])],-1),l("h3",{id:"_8-3-2-算法",tabindex:"-1"},[n("8.3.2 算法 "),l("a",{class:"header-anchor",href:"#_8-3-2-算法","aria-label":'Permalink to "8.3.2 算法"'},"​")],-1),l("div",{class:"algorithm"},[l("p",{class:"title"},"算法8.1 过程间上下文敏感的全程序指针分析算法"),l("iframe",{src:"/posts/StaticAnalytics/08-pta-cs/inter-pta-cs.html",frameborder:"no",border:"0",marginwidth:"0",width:"100%",height:"1250px",marginheight:"0",scrolling:"auto",style:{"box-shadow":"none"}}),l("p",null,[n("其中， "),l("code",null,"Propagate"),n(" 和 "),l("code",null,"AddEdge"),n(" 子过程同算法7.1，"),l("code",null,"Dispatch"),n(" 过程见算法5.1。")])],-1),l("p",null,"对比算法7.2可以发现，算法8.1只是在算法7.2的基础上增加了上下文敏感的内容，更具体的，只是在指针和对象之前加上了上下文的修饰，并在调用语句的处理当中增加了新上下文的生成（见算法第 46 行）而已，整体的思路和框架没有发生任何变化。详细的分析同7.3.2以及7.4.4，这里不作赘述。",-1),l("p",null,"其中，需要注意一下的是我们设置入口方法的上下文为空（见算法第8行），因为一般情况下程序的入口方法只会被操作系统调用一次，因而不需要用上下文加以区分。",-1),l("h2",{id:"_8-4-上下文敏感性的各种变体",tabindex:"-1"},[n("8.4 上下文敏感性的各种变体 "),l("a",{class:"header-anchor",href:"#_8-4-上下文敏感性的各种变体","aria-label":'Permalink to "8.4 上下文敏感性的各种变体"'},"​")],-1),l("p",null,[n("在8.2.2节的最后，我们埋了一个抽象，就是 "),l("code",null,"Select"),n(" 函数，包括在算法8.1中，我们也将这个抽象的 "),l("code",null,"Select"),n(" 作为了我们算法的输入。在这个小节，我们将剥开 "),l("code",null,"Select"),n(" 的抽象，讨论几种常见的上下文敏感性的变体。")],-1),l("h3",{id:"_8-4-1-关于上下文敏感性",tabindex:"-1"},[n("8.4.1 关于上下文敏感性 "),l("a",{class:"header-anchor",href:"#_8-4-1-关于上下文敏感性","aria-label":'Permalink to "8.4.1 关于上下文敏感性"'},"​")],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.4"),l("p",null,[n("定义一个指针分析的 "),l("strong",null,"上下文敏感性（Context Sensitivity）"),n(" 为一个 "),l("strong",null,"上下文生成子（Context Generator）"),n(" ，记为 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"Select(c, l, c':o_i)")])])]),n(" ，描述了实例方法调用的时候用怎样的上下文去修饰目标方法。")]),l("ul",null,[l("li",null,[l("p",null,[l("code",null,"Select"),n(" 函数的输入是调用点处的上下文 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c")]),l("annotation",{encoding:"application/x-tex"},"c")])])]),n(" ，调用点 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"l")]),l("annotation",{encoding:"application/x-tex"},"l")])])]),n(" ，以及调用方法的带有堆上下文的接收对象 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")])]),l("annotation",{encoding:"application/x-tex"},"c':o_i")])])]),n(" 。")])]),l("li",null,[l("p",null,[l("code",null,"Select"),n(" 函数的输出是用于修饰目标方法上下文。")])])])],-1),l("blockquote",null,[l("p",null,[n("简单理解， "),l("code",null,"Select"),n(" 函数是从调用者上下文（Caller Context）到被调用者上下文（Callee Context）的映射。")])],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.5"),l("p",null,[n("如果对于不同的输入，"),l("code",null,"Select"),n(" 给出了相同的输出，称这种现象为"),l("strong",null,"上下文重叠（Context Overlap）"),n("。")])],-1),l("div",{class:"conclusion"},[l("p",{class:"title"},"结论8.2"),l("p",null,[n("如果 "),l("code",null,"Select"),n(" 输出的目标方法的上下文是和现有的所有的该方法的上下文不同的话，我们就 "),l("strong",null,"发现了一个新的上下文敏感的可达方法（discover a new context-sensitive reachable method）"),n(" ，否则我们将会和现有的同名且同上下文的方法进行合并。")]),l("p",null,"从而，我们可以直观的感受到："),l("ul",null,[l("li",null,[l("p",null,[n("如果 "),l("code",null,"Select"),n(" 经常出现上下文重叠，指针分析的精度会受损，相应的，速度会提高；")])]),l("li",null,[l("p",null,[n("如果 "),l("code",null,"Select"),n(" 偶尔出现上下文重叠，指针分析的精度会提高，相应的，速度会减缓。")])])])],-1),l("p",null,"基于上述定义和结论，我们可以形式化地定义出什么是上下文不敏感分析：",-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.6"),l("p",null,[n("定义"),l("strong",null,"上下文不敏感（Context InSensitivity）"),n("：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"Select(\\_, \\_, \\_) = [] ")])])])])],-1),l("blockquote",null,[l("p",null,[n("和4.6.2节状态转移方程中的 "),l("code",null,"_"),n(" 类似， "),l("code",null,"_"),n(" 表示通配符，后续不再额外解释。")])],-1),l("p",null,[n("下面，我们将会讨论几种不同的 "),l("code",null,"Select"),n(" 函数，比较它们之间精度和速度上的区别。")],-1),l("h3",{id:"_8-4-2-调用点敏感",tabindex:"-1"},[n("8.4.2 调用点敏感 "),l("a",{class:"header-anchor",href:"#_8-4-2-调用点敏感","aria-label":'Permalink to "8.4.2 调用点敏感"'},"​")],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.7"),l("p",null,[n("定义"),l("strong",null,"调用点敏感（Call-Site Sensitivity）"),n("：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msup",null,[l("mi",null,"l"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"l"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msup",null,[l("mi",null,"l"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"l"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c = [l', ..., l''] \\Longrightarrow Select(c, l, \\_) = [l', ..., l'', l] ")])])])]),l("p",null,[n("调用点敏感也称为"),l("strong",null,"调用串敏感（Call-String Sensitivity）"),n("。")])],-1),l("p",null,[n("不过，定义8.7给出的 "),l("code",null,"Select"),n(" 函数在实践中是会出问题的。")],-1),l("p",null,[n("考虑递归调用，因为我们的分析是流不敏感的，在分析递归调用的时候不会有所谓的基础情况（Base Case）的概念，从而一旦碰到递归，定义8.7中的 "),l("code",null,"Select"),n(" 函数就会构建出一个无穷的调用串，从而使得我们的指针分析算法无法终止。")],-1),l("p",null,"从而，我们会对调用串的长度进行人为的限制，以保证指针分析的算法能够终止。并且过长的调用串也会破坏我们的指针分析算法，因为递归调用的调用串是无意义的一长串相同的调用点。",-1),l("p",null,[n("我们的处理方法是为上下文的长度设置一个上界，比如说 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k")]),l("annotation",{encoding:"application/x-tex"},"k")])])]),n(" （k-Limiting Context Abstraction）。")],-1),l("ul",null,[l("li",null,[l("p",null,[n("对于调用点敏感，每个上下文都由调用串的最后 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k")]),l("annotation",{encoding:"application/x-tex"},"k")])])]),n(" 个调用点组成；")])]),l("li",null,[l("p",null,[n("在实际操作中， "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k")]),l("annotation",{encoding:"application/x-tex"},"k")])])]),n(" 是一个小数字，通常不超过3；")])]),l("li",null,[l("p",null,"方法上下文和堆上下文可能会使用不同的k。"),l("ul",null,[l("li",null,[n("比如说方法上下文的 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k"),l("mo",null,"="),l("mn",null,"2")]),l("annotation",{encoding:"application/x-tex"},"k = 2")])])]),n(" ，堆上下文的 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k"),l("mo",null,"="),l("mn",null,"1")]),l("annotation",{encoding:"application/x-tex"},"k = 1")])])]),n(" 之类的。")])])])],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.8"),l("p",null,[n("定义 "),l("strong",null,"k-调用点敏感（k-Call-Site Sensitivity）"),n(" ：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"l"),l("mn",null,"1")]),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"l"),l("mn",null,"2")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"l"),l("mi",null,"k")]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"l"),l("mn",null,"2")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"l"),l("mi",null,"k")]),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c = [l_1, l_2, ..., l_k] \\Longrightarrow Select(c, l, \\_) = [l_2, ..., l_k, l] ")])])])]),l("p",null,[n("k-调用点敏感也称为 "),l("strong",null,"k-控制流分析（k-CFA, Control Flow Analysis）"),n(" 。 具体地：")]),l("ul",null,[l("li",null,"1-调用点敏感")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("mi",null,"l"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"Select(\\_, l, \\_) = [l] ")])])])]),l("ul",null,[l("li",null,"2-调用点敏感")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"c"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msup",null,[l("mi",null,"l"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"l"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",null,"c"),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msup",null,[l("mi",null,"l"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",{separator:"true"},","),l("mi",null,"l"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c = [l', l''] \\Longrightarrow Select(c,l,\\_) = [l'', l] ")])])])])],-1),l("p",null,[n("下面我们以 "),l("code",null,"1-Call-Site"),n(" 为例，用下面的例子来跑一下算法8.1。")],-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," C"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    static"),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," main"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        C c "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," C"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        c."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"m"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    Number "),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"id"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(Number "),l("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"n"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," n;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," m"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Number n1, n2, x, y;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        n1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," One"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        n2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Two"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        x "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," this"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"id"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n1);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        y "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," this"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"id"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(n2);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        x."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,[n("其中，关于 "),l("code",null,"Number"),n(" 、 "),l("code",null,"One"),n(" 、 "),l("code",null,"Two"),n(" 的类结构和8.1.1的引例中相同。为了简单起见，我们不考虑堆上下文，且忽略 "),l("code",null,"C.id(Number)"),n(" 方法中的 "),l("code",null,"this"),n(" 变量。")],-1),l("p",null,"最终，我们得到的结果为如下，在这个例子中，我们通过区分上下文的方式成功的避免了对象数据流的汇合（对比8.1.1的引例）：",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:L,alt:"res-pta-cs1",style:{zoom:"30%"}})],-1),l("h3",{id:"_8-4-3-对象敏感",tabindex:"-1"},[n("8.4.3 对象敏感 "),l("a",{class:"header-anchor",href:"#_8-4-3-对象敏感","aria-label":'Permalink to "8.4.3 对象敏感"'},"​")],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.9"),l("p",null,[n("定义 "),l("strong",null,"对象敏感（Object Sensitivity）"),n(" ：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"o"),l("mi",null,"k")]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mi",null,"j")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"o"),l("mi",null,"k")]),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c' = [o_j, ..., o_k] \\Longrightarrow Select(\\_, \\_, c':o_i) = [o_j, ..., o_k, o_i] ")])])])]),l("p",null,[n("对象敏感也称作 "),l("strong",null,"分配点敏感（Allocation-Site Sensitivity）"),n(" 。")])],-1),l("p",null,"对象敏感中的上下文由一组抽象对象（由它们的分配点表示）组成。",-1),l("ul",null,[l("li",null,[l("p",null,"在方法调用的时候，使用接收对象以及接收对象的堆上下文作为被调用者的上下文（就像定义8.9中所形式化定义的那样）；")]),l("li",null,[l("p",null,"根据不同的对象来区分不同的数据流操作，因为流动的数据往往都是由对象携带的（至少对于OO语言来说这是很常见的）。")])],-1),l("p",null,"和调用点敏感类似的，我们可以通过限制上下文的尺寸来牺牲一部分精度，从而提高效率，并且避免由于递归导致的不可终止问题。",-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.10"),l("p",null,[n("定义 "),l("strong",null,"k-对象敏感（k-Object Sensitivity）"),n(" ：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mn",null,"1")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"o"),l("mi",null,"k")]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mn",null,"2")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"o"),l("mi",null,"k")]),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c' = [o_1, ..., o_k] \\Longrightarrow Select(\\_, \\_, c':o_i) = [o_2, ..., o_k, o_i] ")])])])]),l("p",null,"特别地，1-对象敏感："),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"Select(\\_, \\_, c':o_i) = [o_i] ")])])])])],-1),l("p",null,"我们通过下面这个例子来对比一下调用点敏感和对象敏感。",-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," A"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," A"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," B"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"b2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," B"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a1."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"set"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(b1);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"a2."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"set"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(b2);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"x "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," a1."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"}),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," A"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    B f;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," set"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(B "),l("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"b"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        this"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"doSet"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(b);")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," doSet"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(B "),l("span",{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"}},"p"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        this"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".f "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," p;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    B "),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"get"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return"),l("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," this"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".f;")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,"对上述程序分别做1-对象敏感分析和1-调用点敏感分析，我们会得到如下结果：",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:S,alt:"css-os",style:{zoom:"25%"}})],-1),l("p",null,"在这个例子中，我们发现，同一个调用点接收对象不同的时候被调用函数的上下文也是不同的，因此，有些时候对象敏感要比调用点敏感更精确。从调用图上我们可以更直观的看出这一点。",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:A,alt:"cs-os-cg",style:{zoom:"40%"}})],-1),l("p",null,"类似的，同一个接收对象在不同的调用点处被调用函数的上下文其实也是不同的，所以，有些时候调用点敏感也会被比对象敏感更精确。",-1),l("p",null,"其实，在理论上，调用点敏感和对象敏感的精度是不可比的，因为它们各自有各自准的场景和不准的场景，而对于一个程序来说，各种场景的比例是不确定的东西，所以这两种上下文敏感的精度比较也就没有定论了。",-1),l("p",null,"不过，在实践过程中，对于面向对象语言（比如说Java）来说，对象敏感的整体表现要优于调用点敏感，因为使用面向对象语言编程的时候我们会频繁地使用对象来传递数据，从而对象敏感能够更好的避免数据流的合并，从而提升精度。",-1),l("h3",{id:"_8-4-4-类型敏感",tabindex:"-1"},[n("8.4.4 类型敏感 "),l("a",{class:"header-anchor",href:"#_8-4-4-类型敏感","aria-label":'Permalink to "8.4.4 类型敏感"'},"​")],-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.11"),l("p",null,[n("定义 "),l("strong",null,"类型敏感（Type Sensitivity）"),n(" ：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msup",null,[l("mi",null,"t"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"t"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("munder",{accentunder:"true"},[l("mtext",null," "),l("mo",{stretchy:"true"},"‾")]),l("mo",{separator:"true"},","),l("munder",{accentunder:"true"},[l("mtext",null," "),l("mo",{stretchy:"true"},"‾")]),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msup",null,[l("mi",null,"t"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"t"),l("mrow",null,[l("mo",{mathvariant:"normal"},"′"),l("mo",{mathvariant:"normal"},"′")])]),l("mo",{separator:"true"},","),l("mi",null,"I"),l("mi",null,"n"),l("mi",null,"T"),l("mi",null,"y"),l("mi",null,"p"),l("mi",null,"e"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c' = [t', ..., t''] \\Longrightarrow Select(\\underline{\\ }, \\underline{\\ }, c':o_i) = [t', ..., t'', InType(o_i)] ")])])])]),l("p",null,[n("其中，"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"I"),l("mi",null,"n"),l("mi",null,"T"),l("mi",null,"y"),l("mi",null,"p"),l("mi",null,"e"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"InType(o_i)")])])]),n(" 表示 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mi",null,"i")])]),l("annotation",{encoding:"application/x-tex"},"o_i")])])]),n(" 是在哪个类中被创建的。")])],-1),l("p",null,"类型敏感的上下文由一组类型组成，在方法调用的时候，用接收对象的分配点所在的类（注意是分配点所在类，而不是对象本身的类型）以及该对象的堆上下文作为被调用者的上下文。",-1),l("p",null,"类型敏感其实是对对象敏感的一种更粗糙的抽象（Coarser Abstraction），因为我们用接收对象分配点所在的类代替了接收对象作为上下文，这是一种更粗糙的做法。",-1),l("p",null,"类似的，我们也可以定义k-类型敏感来限制冗长的上下文。",-1),l("div",{class:"definition"},[l("p",{class:"title"},"定义8.12"),l("p",null,[n("定义 "),l("strong",null,"k-类型敏感（k-Type Sensitivity）"),n(" ：")]),l("p",null,[l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[l("semantics",null,[l("mrow",null,[l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"t"),l("mn",null,"1")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"t"),l("mi",null,"k")]),l("mo",{stretchy:"false"},"]"),l("mo",null,"⟹"),l("mi",null,"S"),l("mi",null,"e"),l("mi",null,"l"),l("mi",null,"e"),l("mi",null,"c"),l("mi",null,"t"),l("mo",{stretchy:"false"},"("),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"_"),l("mo",{separator:"true"},","),l("msup",null,[l("mi",null,"c"),l("mo",{mathvariant:"normal",lspace:"0em",rspace:"0em"},"′")]),l("mo",null,":"),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",null,"="),l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"t"),l("mn",null,"2")]),l("mo",{separator:"true"},","),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mi",{mathvariant:"normal"},"."),l("mo",{separator:"true"},","),l("msub",null,[l("mi",null,"t"),l("mi",null,"k")]),l("mo",{separator:"true"},","),l("mi",null,"I"),l("mi",null,"n"),l("mi",null,"T"),l("mi",null,"y"),l("mi",null,"p"),l("mi",null,"e"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"c' = [t_1, ..., t_k] \\Longrightarrow Select(\\_, \\_, c':o_i) = [t_2, ..., t_k, InType(o_i)] ")])])])]),l("p",null,[n("其中，"),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"I"),l("mi",null,"n"),l("mi",null,"T"),l("mi",null,"y"),l("mi",null,"p"),l("mi",null,"e"),l("mo",{stretchy:"false"},"("),l("msub",null,[l("mi",null,"o"),l("mi",null,"i")]),l("mo",{stretchy:"false"},")")]),l("annotation",{encoding:"application/x-tex"},"InType(o_i)")])])]),n(" 表示 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("msub",null,[l("mi",null,"o"),l("mi",null,"i")])]),l("annotation",{encoding:"application/x-tex"},"o_i")])])]),n(" 是在哪个类中被创建的。")])],-1),l("p",null,[n("在相同的 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mi",null,"k")]),l("annotation",{encoding:"application/x-tex"},"k")])])]),n(" 限制下，类型敏感不会比对象敏感更加精确，因为类型敏感是对对象敏感更粗糙的抽象。和对象敏感相比，类新敏感通过牺牲精度的方式来换取了更好的性能，它将同一个类型中的各个分配点在上下文中合并了。")],-1),l("p",null,"比如在下面的例子中：",-1),l("div",{class:"language-java vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"java"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," X"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," main"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Y y1 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Y"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        y1."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"foo"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Y y2 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Y"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        y2."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"foo"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        Y y3 "),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," new"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Y"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        y3."),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"foo"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    }")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," Y"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    void"),l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," foo"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {}")]),n(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),l("button",{class:"collapse"})],-1),l("p",null,[n("三次对于 "),l("code",null,"Y.foo"),n(" 的调用，如果采用1-调用点敏感，这三次调用分别具有不同的上下文："),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mn",null,"3")]),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"[o_3]")])])]),n(" 、 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mn",null,"5")]),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"[o_5]")])])]),n(" 、 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mo",{stretchy:"false"},"["),l("msub",null,[l("mi",null,"o"),l("mn",null,"7")]),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"[o_7]")])])]),n(" ，这是精确的；但如果采用1-类型敏感分析，这三次调用的上下文都是 "),l("span",{class:"katex"},[l("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[l("semantics",null,[l("mrow",null,[l("mo",{stretchy:"false"},"["),l("mi",null,"X"),l("mo",{stretchy:"false"},"]")]),l("annotation",{encoding:"application/x-tex"},"[X]")])])]),n(" ，这是更不精确的。")],-1),l("h3",{id:"_8-4-5-对比",tabindex:"-1"},[n("8.4.5 对比 "),l("a",{class:"header-anchor",href:"#_8-4-5-对比","aria-label":'Permalink to "8.4.5 对比"'},"​")],-1),l("p",null,"下面我们给一组数据来对比一下前面三种上下文敏感的策略：",-1),l("p",{style:{"text-align":"center"}},[l("img",{src:D,alt:"cs-os-ts",style:{zoom:"50%"}})],-1),l("blockquote",null,[l("p",null,"数据来源：Yue Li, Tian Tan, Anders Møller, and Yannis Smaragdakis. “A Principled Approach to Selective Context Sensitivity for Pointer Analysis”. TOPLAS 2020.")],-1),l("p",null,"表中的数字越小越好，对于时间和可能错误的类型转换来说自然是越少越好；对于调用边，因为我们做的是过近似（见定义1.3）和可能性分析（见定义3.2），因此输出集越小说明我们的答案越精确。",-1),l("p",null,"从上表中，我们可以得出结论：",-1),l("div",{class:"conclusion"},[l("p",{class:"title"},"结论8.3"),l("p",null,"通常，在面向对象语言的实践过程中："),l("ul",null,[l("li",null,[l("p",null,"精度方面："),l("ul",null,[l("li",null,"对象敏感 > 类型敏感 > 调用点敏感")])]),l("li",null,[l("p",null,"效率方面："),l("ul",null,[l("li",null,"类型敏感 > 对象敏感 > 调用点敏感")])])])],-1),l("h2",{id:"_8-5-自检问题",tabindex:"-1"},[n("8.5 自检问题 "),l("a",{class:"header-anchor",href:"#_8-5-自检问题","aria-label":'Permalink to "8.5 自检问题"'},"​")],-1),l("ol",null,[l("li",null,[l("p",null,"上下文敏感（Context Sensitivity, C.S.）是什么？")]),l("li",null,[l("p",null,"上下文敏感堆（C.S. Heap）是什么？")]),l("li",null,[l("p",null,"为什么 C.S. 和 C.S. Heap 能够提高分析精度？")]),l("li",null,[l("p",null,"上下文敏感的指针分析有哪些规则？")]),l("li",null,[l("p",null,"如何理解上下文敏感的指针分析算法（Algorithm for Context-sensitive Pointer Analysis）？")]),l("li",null,[l("p",null,"常见的上下文敏感性变体（Context Sensitivity Variants）有哪些？")]),l("li",null,[l("p",null,"常见的几种上下文变体之间的差别和联系是什么？")])],-1),l("div",{class:"tip custom-block"},[l("p",{class:"custom-block-title"},[l("span",{lang:"en"},"作业布置"),l("span",{lang:"zh-CN"},"作业布置")]),l("p",null,[n("到此为止，读者已经具备了完成"),l("a",{href:"https://tai-e.pascal-lab.net/pa6.html",target:"_blank",rel:"noreferrer"},"作业 6：上下文敏感指针分析"),n("以及"),l("a",{href:"https://tai-e.pascal-lab.net/pa7.html",target:"_blank",rel:"noreferrer"},"作业 7：Alias-Aware 的过程间常量传播"),n("所需的全部理论知识。")])],-1)])),"main-header":t(()=>[a(i.$slots,"main-header")]),"main-header-after":t(()=>[a(i.$slots,"main-header-after")]),"main-nav":t(()=>[a(i.$slots,"main-nav")]),"main-content":t(()=>[a(i.$slots,"main-content")]),"main-content-after":t(()=>[a(i.$slots,"main-content-after")]),"main-nav-before":t(()=>[a(i.$slots,"main-nav-before")]),"main-nav-after":t(()=>[a(i.$slots,"main-nav-after")]),comment:t(()=>[a(i.$slots,"comment")]),footer:t(()=>[a(i.$slots,"footer")]),aside:t(()=>[a(i.$slots,"aside")]),"aside-custom":t(()=>[a(i.$slots,"aside-custom")]),default:t(()=>[a(i.$slots,"default")]),_:3},8,["frontmatter"])}}};export{$ as default};
